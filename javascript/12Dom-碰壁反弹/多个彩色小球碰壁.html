<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>多个彩色小球碰壁反弹</title>
	<style>
	#big {
		width: 600px;
		height: 400px;
		border: 2px solid blue;
		position: relative;
	}

	.small {
		position: absolute;
		border-radius: 100%;
	}
</style>
</head>
<body>
	<div id="big"></div>

	<script>
		var oBig = document.getElementById("big");
		
		function getRandom(max,min) {
			return Math.floor(Math.random() * (max - min + 1) + min);
		}

		function getColor() {
			var r = getRandom(255,0);
			var g = getRandom(255,0);
			var b = getRandom(255,0);
			return "rgb(" + r  + "," + g  + "," + b + ")";
		}

		function createBall() {
			var newDiv = document.createElement("div");
			oBig.appendChild(newDiv);
			var d = getRandom(50,25);
			newDiv.style.width = d + "px";
			newDiv.style.height = d + "px";
			newDiv.style.backgroundColor = getColor();
			newDiv.className = "small";
			moveBall(newDiv);
		}

		function moveBall(obj){
			var speedX = getRandom(8,4);
			var speedY = getRandom(8,4);
			setInterval(function(){


				// 水平方向
				if (oBig.clientWidth - obj.offsetWidth <= obj.offsetLeft) {
					speedX = -speedX;
					obj.style.left = obj.offsetLeft + speedX + "px";
					oBig.style.width = oBig.clientWidth + Math.abs(speedX) + "px";
					if (oBig.clientWidth >= 700) {
						oBig.style.border = "none";
						oBig.style.width = document.documentElement.clientWidth + "px";
						oBig.style.height = document.documentElement.clientHeight + "px";
					}


				} else {
					obj.style.left = obj.offsetLeft + speedX + "px";

				}

				if (obj.offsetLeft == 0) {
					speedX = Math.abs(speedX);
				}

				// 垂直方向
				if (oBig.clientHeight - obj.offsetHeight <= obj.offsetTop) {
					speedY = -speedY;
					obj.style.top = obj.offsetTop + speedY + "px";
					oBig.style.height = oBig.clientHeight + Math.abs(speedY) + "px";


				} else {
					obj.style.top = obj.offsetTop + speedY + "px";

				}

				if (obj.offsetTop == 0) {
					speedY = Math.abs(speedY);
				}



			},20);
		}

		oBig.onclick = function(){
			createBall();	
		}


	</script>
</body>
</html>
