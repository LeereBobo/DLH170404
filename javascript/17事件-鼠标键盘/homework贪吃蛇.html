<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#item {
				width: 700px;
				height: 500px;
				border: 10px solid black;
				margin: 0 auto;
				position: relative;
			}
			
			#drag {
				width: 100px;
				height: 100px;
				background-color: lightskyblue;
				position: absolute;
				top: 350px;
				left: 250px;
			}
		</style>
	</head>

	<body>
		<div id="item">
			<div id="drag"></div>
		</div>

		<script type="text/javascript">
			var oItem = document.getElementById("item");
			var oDrag = document.getElementById("drag");
			var speed = 1;
			var timer = null;
			
			linearMove(oDrag, "top", -speed, oItem);
			
			document.onkeydown = function(ev) {
				var ev = ev || window.event;
				clearInterval(timer);
				switch(ev.keyCode) {
					case 38:
						linearMove(oDrag, "top", -speed, oItem);
						break;
					case 40:
						linearMove(oDrag, "top", speed, oItem);
						break;
					case 39:
						linearMove(oDrag, "left", speed, oItem);
						break;
					case 37:
						linearMove(oDrag, "left", -speed, oItem);
						break;
					default:
						break;
				}
			}

			//匀速运动
			function linearMove(obj, attr, speed, target) {
				timer = setInterval(function() {
					if(knock(obj, target)) {
						clearInterval(timer);
						alert("撞啦");
					} else {
						if(attr == "left") {
							obj.style.left = obj.offsetLeft + speed + "px";
						} else if(attr == "top") {
							obj.style.top = obj.offsetTop + speed + "px";
						}
					}

				}, 10);

			}

			function knock(obj, target) {
				if(obj.offsetLeft <= 0 || obj.offsetLeft + obj.offsetWidth >= target.clientWidth ||
					obj.offsetTop <= 0 || obj.offsetTop + obj.offsetHeight >= target.clientHeight) {
					return true;
				} else {
					return false;
				}
			}
		</script>
	</body>

</html>