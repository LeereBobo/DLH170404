<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#wrap {
				width: 700px;
				height: 500px;
				border: 5px solid black;
				position: relative;
			}
			
			#boxA {
				width: 50px;
				height: 50px;
				background-color: lightgray;
				position: absolute;
				top: 0;
				left: 0;
			}
			
			#boxB1 {
				width: 50px;
				height: 50px;
				background-color: pink;
				position: absolute;
				top: 100px;
				left: 100px;
			}
			
			#boxB2 {
				width: 50px;
				height: 50px;
				background-color: orange;
				position: absolute;
				top: 200px;
				left: 200px;
			}
			
			#boxB3 {
				width: 50px;
				height: 50px;
				background-color: lawngreen;
				position: absolute;
				top: 300px;
				left: 300px;
			}
			
			#boxB4 {
				width: 50px;
				height: 50px;
				background-color: deepskyblue;
				position: absolute;
				top: 400px;
				left: 400px;
			}
		</style>
	</head>

	<body>
		<div id="wrap">
			<div id="boxA"></div>
			<div id="boxB1"></div>
			<div id="boxB2"></div>
			<div id="boxB3"></div>
			<div id="boxB4"></div>
		</div>
	</body>

	<script type="text/javascript">
		var oBoxA = document.getElementById("boxA");
		var oBoxB1 = document.getElementById("boxB1");
		var oBoxB2 = document.getElementById("boxB2");
		var oBoxB3 = document.getElementById("boxB3");
		var oBoxB4 = document.getElementById("boxB4");

		var oWrap = document.getElementById("wrap");
		var maxWidth = oWrap.clientWidth - oBoxA.offsetWidth;
		var maxHeight = oWrap.clientHeight - oBoxA.offsetHeight;
		
		
		
		oBoxA.onmousedown = function(e) {
				var e = e || window.event;

				var mx_boxA = e.clientX;
				var my_boxA = e.clientY;
				var boxALeft = oBoxA.offsetLeft;
				var boxATop  = oBoxA.offsetTop;
				document.onmousemove = function(e) {
					var e = e || window.event;

					var mx = e.clientX;
					var my = e.clientY;

					var lessX = mx - mx_boxA;
					var lessY = my - my_boxA;

					var currentLeft = lessX + boxALeft;
					var currentTop = lessY + boxATop;

					if(currentLeft >= maxWidth) {
						currentLeft = maxWidth;
					} else if(currentLeft <= 0) {
						currentLeft = 0;
					}
					if(currentTop >= maxHeight) {
						currentTop = maxHeight;
					} else if(currentTop <= 0) {
						currentTop = 0;
					}

					oBoxA.style.left = currentLeft + "px";
					oBoxA.style.top = currentTop + "px";
					
					clearDiv(oBoxB1,oBoxA);
					clearDiv(oBoxB2,oBoxA);
					clearDiv(oBoxB3,oBoxA);
					clearDiv(oBoxB4,oBoxA);
				}

			}
		//fixedDiv固定的Div oBoxB系列
		//moveDiv移动的Div  oBoxA
		
		function clearDiv(fixedDiv, moveDiv) {
			//获取moveDiv的高宽
			var moveW = moveDiv.offsetWidth;
			var moveH = moveDiv.offsetHeight;
			//获取moveDiv的位置
			var moveL = moveDiv.offsetLeft;
			var moveT = moveDiv.offsetTop;
			//获取fixedDiv的宽高
			var fixedW = fixedDiv.offsetWidth;
			var fixedH = fixedDiv.offsetHeight;
			//获取fixedDiv的位置
			var fixedL = fixedDiv.offsetLeft;
			var fixedT = fixedDiv.offsetTop;

			var leftType  = moveL + moveW >= fixedL;
			var rightType = fixedL + fixedW >= moveL;
			var topType   = moveT + moveH >= fixedT;
			var bottomType = fixedT + fixedH >= moveT;
			
			if (leftType && rightType && topType && bottomType) {
					fixedDiv.style.display = "none";
			}
		
		
		}

		document.onmouseup = function() {
			document.onmousemove = null;
		}
	</script>

</html>