<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#wrap {
				width: 450px;
				margin: 350px auto;
			}
			
			#wrap::after {
				content: "";
				display: table;
				clear: both;
			}
			
			.line {
				width: 50px;
				height: 50px;
				border: 1px solid black;
				position: relative;
				float: left;
				margin: 10px;
				background-color: black;
			}
			
			.all {
				width: 100%;
				height: 100%;
				text-align: center;
				line-height: 50px;
				color: white;
				opacity: 0.5;
				position: absolute;
				top: 0;
				left: 0;
				z-index: 100;
				
			}
			
			.inDiv {
				width: 100%;
				position: absolute;
				bottom: 51px;
				left: 0;
				
			}
			
			.aDiv {
				background-color: red;
			}
			
			.sDiv {
				background-color: mediumvioletred;
			}
			
			.dDiv {
				background-color: mediumpurple
			}
			
			.jDiv {
				background-color: blue;
			}
			
			.kDiv {
				background-color: lightseagreen;
			}
			
			.lDiv {
				background-color: yellowgreen;
			}
		</style>
	</head>

	<body>
		<div id="wrap">

			<div class="line">
				<div class="inDiv aDiv"></div>
				<div class="all aDiv">A</div>
			</div>

			<div class="line">
				<div class="inDiv sDiv"></div>
				<div class="all sDiv">S</div>
			</div>

			<div class="line">
				<div class="inDiv dDiv"></div>
				<div class="all dDiv">D</div>
			</div>

			<div class="line">
				<div class="inDiv jDiv"></div>
				<div class="all jDiv">J</div>
			</div>

			<div class="line">
				<div class="inDiv kDiv"></div>
				<div class="all kDiv">K</div>
			</div>

			<div class="line">
				<div class="inDiv lDiv"></div>
				<div class="all lDiv">L</div>
			</div>

		</div>

		<!--js部分-->
		<script type="text/javascript">
			//获取

			var oIndivs = document.getElementsByClassName("inDiv");
			var oAlls = document.getElementsByClassName("all");
			var arrKeyCode = [65, 83, 68, 74, 75, 76];
			
			
			document.onkeydown = function(ev) {
				var ev = ev || window.event;
				var index = arrKeyCode.indexOf(ev.keyCode);
				if (index != -1) {
					linear(oIndivs[index],"height",3,300);
					line(oAlls[index],"opacity",0.1,1);
				} 

			}
			document.onkeyup = function(ev) {
				var ev = ev || window.event;
				var index = arrKeyCode.indexOf(ev.keyCode);
				if (index != -1) {
					linear(oIndivs[index],"height",-3,0);
					line(oAlls[index],"opacity",-0.1,0.5);
				} 

			}
			
			//匀速运动
			function linear(obj, attr, speed, iTarget) {
				clearInterval(obj.timer);
				obj.timer = setInterval(function() {
					var attrValue = parseInt(getStyle(obj, attr));
					if(Math.abs(iTarget - attrValue) <= Math.abs(speed)){
						obj.style[attr] = iTarget + "px";
						clearInterval(obj.timer);
					} else {
						obj.style[attr] = attrValue + speed + "px";
					}

				}, 10);
			} 
			
			//透明度函数
			function line(obj, attr, speed, iTarget) {
				clearInterval(obj.timer);
				obj.timer = setInterval(function() {
					var attrValue = parseFloat(getStyle(obj, attr));
					if(Math.abs(iTarget - attrValue) <= Math.abs(speed)){
						obj.style[attr] = iTarget;
						clearInterval(obj.timer);
					} else {
						obj.style[attr] = attrValue + speed;
					}

				}, 100);
			} 
			
				//获取属性
				function getStyle(obj, attr) {
					//获取当前的样式
					if(obj.currentStyle) {
						return obj.currentStyle[attr]; //针对IE 			
					} else {
						return getComputedStyle(obj)[attr];
					}
				}
		</script>

	</body>

</html>