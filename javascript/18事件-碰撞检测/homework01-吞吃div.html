<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#all {
				width: 600px;
				height: 500px;
				border: 5px solid black;
				position: relative;
			}
			
			#all>div {
				width: 50px;
				height: 50px;
				float: left;
				position: absolute;
			}
			
			#div1 {
				background-color: lightgray;
				top: 0;
				left: 0;
			}
			
			#div2 {
				background-color: pink;
				top: 100px;
				left: 100px;
			}
			
			#div3 {
				background-color: orange;
				top: 200px;
				left: 200px;
			}
			
			#div4 {
				background-color: lightgreen;
				top: 300px;
				left: 300px;
			}
			
			#div5 {
				background-color: lightblue;
				top: 400px;
				left: 400px;
			}
		</style>
	</head>

	<body>
		<div id="all">

			<div id="div1"></div>
			<div id="div2"></div>
			<div id="div3"></div>
			<div id="div4"></div>
			<div id="div5"></div>

		</div>

		<script type="text/javascript">
			var oAll = document.getElementById("all");
			var oDiv1 = document.getElementById("div1");
			var oDiv2 = document.getElementById("div2");
			var oDiv3 = document.getElementById("div3");
			var oDiv4 = document.getElementById("div4");
			var oDiv5 = document.getElementById("div5");
			
			//鼠标按下
			oDiv1.onmousedown = function() {
				oAll.onmousemove = function(ev) {
					var ev = ev || window.event;
					
					//边界运动					
					//最大可运动范围
					var maxW = oAll.clientWidth - oDiv1.offsetWidth;
					var maxH = oAll.clientHeight - oDiv1.offsetHeight; 
					
					//实际运动
					theLeft = ev.clientX - oAll.offsetLeft - oAll.clientLeft - oDiv1.offsetWidth / 2;
					theTop = ev.clientY - oAll.offsetTop - oAll.clientTop - oDiv1.offsetHeight / 2;
					
					if (theLeft >= maxW) {
						theLeft = maxW;
					} else if(theLeft <= 0){
						theLeft = 0;
					}
					
					if (theTop >= maxH) {
						theTop = maxH;
					} else if(theTop <= 0){
						theTop = 0;
					}
					
					oDiv1.style.left = theLeft + "px";
					oDiv1.style.top = theTop + "px";
					
					//调用函数
					boundary(oDiv2);
					boundary(oDiv3);
					boundary(oDiv4);
					boundary(oDiv5);
				}

			}

			//鼠标抬起
			oDiv1.onmouseup = function() {
				oAll.onmousemove = null;
			}
			
			//函数
			function boundary(obj) {
				var leftType = obj.offsetLeft <= oDiv1.offsetLeft + oDiv1.offsetWidth;
				var rightType = obj.offsetLeft + obj.offsetWidth >= oDiv1.offsetLeft;
				var topType = obj.offsetTop <= oDiv1.offsetTop + oDiv1.offsetHeight;
				var bottomType = obj.offsetTop + obj.offsetHeight >= oDiv1.offsetTop;

				if(leftType && rightType && topType && bottomType) {
					obj.style.display = "none";
				} 

			}
		</script>
	</body>

</html>