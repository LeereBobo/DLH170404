<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#wrap {
				width: 700px;
				height: 500px;
				border: 10px solid lightpink;
				margin: 0 auto;
				position: relative;
			}
			
			#boxA {
				width: 50px;
				height: 50px;
				background-color: lightgray;
				position: absolute;
				top: 0;
				left: 0;
				border-radius: 25px;
			}
			
			#boxB {
				width: 100px;
				height: 100px;
				background-color: lightgray;
				position: absolute;
				top: 50%;
				left: 50%;
				margin-left: -50px;
				margin-top: -50px;
				border-radius: 50px;
			}
		</style>
	</head>

	<body>

		<div id="wrap">
			<div id="boxA">

			</div>
			<div id="boxB">

			</div>
		</div>
	</body>

	<script type="text/javascript">
		var oWrap = document.getElementById("wrap");
		var oBoxA = document.getElementById("boxA");
		var oBoxB = document.getElementById("boxB");
		
		oBoxA.onmousedown = function(ev){
			oBoxA.onmousemove = function (ev){
				var ev = ev || window.event;
				
				var leftType = ev.clientX >= oWrap.offsetLeft + oBoxA.offsetWidth / 2 + 10;
				var rightType = ev.clientX <= oWrap.offsetWidth + oWrap.offsetLeft - oBoxA.offsetWidth  +  20;
				var topType = ev.clientY >= oWrap.offsetTop +oBoxA.offsetHeight / 2 + 10;
				var bottomType = ev.clientY <= oWrap.offsetTop + oWrap.offsetHeight - oBoxA.offsetHeight + 20;
				
				if(leftType&&rightType&&topType &&bottomType){
				oBoxA.style.left = ev.clientX - oWrap.offsetLeft - oBoxA.offsetWidth / 2 - 10+ "px";
				oBoxA.style.top  = ev.clientY - oWrap.offsetTop  - oBoxA.offsetHeight / 2 - 10 + "px";
				}
				
				//圆心的位置
				var boxArl = (oBoxA.offsetWidth + oBoxB.offsetWidth) / 2;
				var boxArt = oBoxA.offsetTop + oBoxB.offsetHeight / 2;
				
				var boxBrl = (oBoxA.offsetWidth + oBoxB.offsetWidth) / 2;
				var boxBrt = oBoxA.offsetTop + oBoxB.offsetHeight / 2;
				
				//半径
				var boxAR = oBoxA.offsetWidth / 2;
				var boxBR = oBoxB.offsetWidth / 2;
				
				var isTouch = ( boxArl - boxBrl) * ( boxArl - boxBrl)+ ( boxArt - boxBrt) * ( boxArt - boxBrt) <= (boxAR - boxBR)*(boxAR - boxBR);
				
				if(isTouch){
					oBoxB.style.backgroundColor = "red";
					
				}else{
					oBoxB.style.backgroundColor = "lightgray";
				}
			}
		}
		
		oBoxA.onmouseup = function(){
			oBoxA.onmousemove = null;
		}
	</script>

</html>
