<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
				font-family: "微软雅黑";
			}
			
			#wrap {
				background: url(img/game_bg.jpg) 0 0 no-repeat;
				height: 480px;
				width: 320px;
				position: relative;
				margin: 0 auto;
			}
			
			#score {
				position: absolute;
				font-weight: bold;
				font-size: 16px;
				color: white;
				left: 65px;
				top: 15px;
			}
			
			#countDown {
				position: absolute;
				background: url(img/progress.png) 0 0 no-repeat;
				/*background-color: red;*/
				width: 180px;
				height: 16px;
				left: 63px;
				top: 66px;
			}
			
			#wolfs {
				position: absolute;
			}
			
			#menu {
				position: absolute;
				width: 320px;
				text-align: center;
				left: 0;
				top: 200px;
			}
			
			#start,
			#handle,
			#gameOver {
				cursor: pointer;
				line-height: 50px;
				font-size: 30px;
				font-weight: bold;
				color: #F60;
				text-shadow: 0 0 5px #FFFF00;
				display: block;
				text-decoration: none;
			}
			
			#gameOver {
				position: absolute;
				width: 320px;
				text-align: center;
				top: 200px;
				left: 0;
				display: none;
			}
		</style>
	</head>

	<body>

		<div id="wrap">
			<!--分数-->
			<div id="score">0</div>
			<!--倒计时-->
			<div id="countDown"></div>
			<!--灰太狼-->
			<div id="wolfs">

			</div>
			<div id="menu">
				<div id="start">开始</div>
				<div id="handle">游戏开始说明</div>
			</div>
			<div id="gameOver">
				game over!
			</div>
		</div>

	</body>

	<script type="text/javascript">
		var oScore = document.getElementById("score");
		var oWolfs = document.getElementById("wolfs");
		var oStart = document.getElementById("start");
		var oMenu = document.getElementById("menu");
		var oCountDown = document.getElementById("countDown");
		var oGameOver = document.getElementById("gameOver");
		var moveTimer = null;
		var timer = null;

		var score = 0; //记录分数
		//出现
		var arrPos = [{
			l: "98px",
			t: "115px"
		}, {
			l: "17px",
			t: "160px"
		}, {
			l: "15px",
			t: "220px"
		}, {
			l: "30px",
			t: "293px"
		}, {
			l: "122px",
			t: "273px"
		}, {
			l: "207px",
			t: "295px"
		}, {
			l: "200px",
			t: "211px"
		}, {
			l: "187px",
			t: "141px"
		}, {
			l: "100px",
			t: "185px"
		}];

		oStart.onclick = function() {
			oMenu.innerHTML = "";
			getCountDown();
			createWolf();
			

		}

		//时间进度条变化
		function getCountDown() {
			var countTimer = null;

			var a = 180;
			countTimer = setInterval(function() {

				oCountDown.style.width = a-- + "px";
				if(a == 0) {
					//oMenu.innerHTML = "";
					oGameOver.style.display = "block";
					clearInterval(timer);
					oWolfs.removeChild(newImg);
					createWolf();

				}

			}, 100);
		}

		//添加灰太狼和小灰灰
		function createWolf() {
			var newImg = document.createElement("img");
			oWolfs.appendChild(newImg);
			var index = getRandom(8, 0);
			var positionJson = arrPos[index];
			oWolfs.style.top = positionJson["t"];
			oWolfs.style.left = positionJson["l"];
			var i = 0; //图片是第几张
			var count = 0; //记录定时器走过的次数  11次为1个循环

			var tf = getRandom(1, 0);

			timer = setInterval(function() {

				if(tf == 0) {
					//点击灰太狼图片路径改变  分数加10
					var a = 0;
					newImg.onclick = function() {
						a++;
						var hitTimer = 0
						clearInterval(timer);
						if(a <= 1) {
							score += 10;
							oScore.innerHTML = score;
						}
						var j = 6;
						hitTimer = setInterval(function() {
							if(j >= 6 && j <= 9) {
								newImg.src = "img/h" + j + ".png";
								j++;
							} else {
								clearInterval(hitTimer);
								oWolfs.removeChild(newImg);
								createWolf();
							}

						}, 150);

					}

					if(count < 6) {
						//h0 ~ h5
						newImg.src = "img/h" + i + ".png";
						i++;
					} else if(count >= 6 && count < 12) {
						//h4 ~ h0
						i--;
						newImg.src = "img/h" + i + ".png";

					} else {
						//清除定时器
						//随机一个新的位置
						clearInterval(timer);
						oWolfs.removeChild(newImg);
						//随机一个新的位置
						createWolf();

					}
					count++;

				} else if(tf == 1) {
					//点击小灰灰图片路径改变  分数减10
					var b = 0;
					newImg.onclick = function() {
						b++;
						var hitTimer1 = 0
						clearInterval(timer);
						if(b <= 1) {
							score -= 10;
							oScore.innerHTML = score;
						}
						var k = 6;
						hitTimer1 = setInterval(function() {
							if(k >= 6 && k <= 9) {
								newImg.src = "img/x" + k + ".png";
								k++;
							} else {
								clearInterval(hitTimer1);
								oWolfs.removeChild(newImg);
								createWolf();
							}

						}, 150);
					}
					if(count < 6) {
						//x0 ~ x5
						newImg.src = "img/x" + i + ".png";
						i++;
					} else if(count >= 6 && count < 12) {
						//x4 ~ x0
						i--;
						newImg.src = "img/x" + i + ".png";

					} else {
						//清除定时器
						//随机一个新的位置
						clearInterval(timer);
						oWolfs.removeChild(newImg);
						//随机一个新的位置
						createWolf();
					}
					count++;
				}
			}, 150);
		}

		//随机函数
		function getRandom(max, min) {
			return Math.floor(Math.random() * (max - min + 1) + min);
		}
	</script>

</html>