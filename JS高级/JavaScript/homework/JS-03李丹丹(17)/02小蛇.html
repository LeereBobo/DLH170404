<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#wrap {
				width: 600px;
				height: 600px;
				border: 5px solid black;
				margin: 20px auto;
			}
			
			#box {
				width: 50px;
				height: 50px;
				border-radius: 50%;
				background-color: red;
				position: absolute;
			}
		</style>
	</head>

	<body>
		<div id="wrap">
			<div id="box"></div>
		</div>

		<script type="text/javascript">
			var oWrap = document.getElementById("wrap");
			var oBox = document.getElementById("box");
			var timer = 0;
			var firstTimer = 0;
			//38上 40下  37 左  39右

		firstTimer = setInterval(function(){
				oBox.style.left = oBox.offsetLeft + 2 + "px";
				if(oBox.offsetLeft <= oWrap.offsetLeft) {
						alert("哦哦哦 ! 碰壁啦");
						oBox.style.left = oWrap.offsetLeft + "px";
						clearInterval(firstTimer);
					}
			},100);

			document.onkeydown = function(ev) {
				clearInterval(firstTimer);
				clearInterval(timer);
				var ev = ev || window.event;
				console.log("sss");
				timer = setInterval(function() {
					
					switch(ev.keyCode) {
						case 37:
							oBox.style.left = oBox.offsetLeft - 5 + "px";
							break;
						case 38:
							
							oBox.style.top = oBox.offsetTop - 5 + "px";
							break;
						case 39:
							
							oBox.style.left = oBox.offsetLeft + 5 + "px";
							break;
						case 40:
							
							oBox.style.top = oBox.offsetTop + 5 + "px";
							break;
						default:
							break;
					}
					console.log(oBox.offsetLeft);
					if(oBox.offsetLeft <= oWrap.offsetLeft) {
						alert("哦哦哦 ! 碰壁啦");
						oBox.style.left = oWrap.offsetLeft + "px";
					}
					if(oBox.offsetLeft >= (oWrap.offsetLeft + 560)) {
						oBox.style.left = oWrap.offsetLeft + 560 + "px";
						alert("哦哦哦 ! 碰壁啦");
					}
					if(oBox.offsetTop <= oWrap.offsetTop) {
						oBox.style.top = oWrap.offsetTop + "px";
						alert("哦哦哦 ! 碰壁啦");
					}
					if(oBox.offsetTop >= (oWrap.offsetTop + 560)) {
						oBox.style.top = oWrap.offsetTop + 560 + "px";
						alert("哦哦哦 ! 碰壁啦");
					}
				}, 100);

			}
		</script>
	</body>

</html>