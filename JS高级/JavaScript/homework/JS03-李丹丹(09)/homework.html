<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#main {
				border: 1px dashed black;
				width: 600px;
				margin: auto;
			}
			
			#counts,
			#times {
				display: inline-block;
				margin: 10px;
				font-size: 25px;
			}
			
			#counts {
				margin-left: 330px;
			}
			
			#descript {
				font-size: 20px;
				width: 300px;
				margin: 15px auto;
			}
			
			#bigText {
				text-align: center;
				font-size: 80px;
			}
			
			#smallText div {
				display: inline-block;
				font-size: 60px;
				padding: 10px;
			}
			
			#smallText {
				text-align: center;
			}
		</style>
	</head>

	<body>
		<div id="main">
			<div id="times">剩余时间:30</div>
			<div id="counts">完成:0</div>
			<div id="bigText">黑</div>
			<div id="descript">根据上面的字的颜色从下面选择正确的字，选择正确自动开始</div>
			<div id="smallText">
				<div>红</div>
				<div>黄</div>
				<div>蓝</div>
				<div>绿</div>
				<div>黑</div>
			</div>
			<script type="text/javascript">
				var oTimes = document.getElementById("times");
				var oCounts = document.getElementById("counts");
				var oBigText = document.getElementById("bigText");
				var oSmallText = document.getElementById("smallText");
				var oSmallTexts = oSmallText.getElementsByTagName("div");
				var colorArr = ["red", "yellow", "blue", "green", "black"];
				var textArr = ["红", "黄", "蓝", "绿", "黑"];
				var timer = 0;
				var socre = 0;
				var keyNum = 0;

				//倒计时函数
				function getTimer() {
					clearInterval(timer);
					var count = 29;
					timer = setInterval(function() {
						oTimes.innerHTML = "剩余时间:" + (count--);
						if(count == -1) {
							alert("游戏结束" +"  "+ "完成" + socre);
							clearInterval(timer);
							count = 29;
							oTimes.innerHTML = "剩余时间:" + 30;
						}
					}, 1000);
				}
				//随机0~4之间的5个不重复数组函数
				function getRandom(max, min) {
					return Math.floor(Math.random() * (max - min + 1) + min);
				}

				function getRandomArr() {
					var arr = [];
					while(arr.length != 5) {
						var ran = getRandom(4, 0);
						var isRepeat = true;
						for(var i = 0; i < arr.length; i++) {
							if(arr[i] == ran) {
								isRepeat = false;
								break;
							}
						}
						if(isRepeat == true) {
							arr.push(ran);
						}
					}
					return arr;
				}

				//打乱字的颜色和顺序;

				function changeColorAndText() {
					var colorIndex = getRandomArr();
					var textIndex = getRandomArr();

					for(var j = 0; j < oSmallTexts.length; j++) {
						oSmallTexts[j].innerHTML = textArr[textIndex[j]];
						oSmallTexts[j].style.color = colorArr[colorIndex[j]];
						oSmallTexts[j].word = textIndex[j];
					}
					oBigText.innerHTML = textArr[getRandom(4, 0)];
					var num1 = getRandom(4, 0);
					oBigText.style.color = colorArr[num1];
					 keyNum = num1;
				}
				var flag = true;
				changeColorAndText();
				for(var i = 0; i < oSmallTexts.length; i++) {
					oSmallTexts[i].onclick = function() {
						if(keyNum == this.word) {
							if(flag) {
								getTimer();
								flag = false;
							}
							socre++;
							changeColorAndText();
							oCounts.innerHTML = "完成:" + socre;
						}
					}
				}
			</script>
		</div>
	</body>

</html>