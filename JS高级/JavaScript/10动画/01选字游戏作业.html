<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#all {
				width: 500px;
				border: 1px solid black;
				margin: 0 auto;
				padding: 20px;
			}
			
			#all #top {
				overflow: hidden;
			}
			
			#time {
				float: left;
				font-size: 30px;
			}
			
			#score {
				float: right;
				font-size: 30px;
			}
			
			#big_text {
				font-size: 150px;
				width: 250px;
				height: 250px;
				text-align: center;
				line-height: 300px;
				margin: 0 auto;
			}
			
			#intro {
				font-size: 30px;
				text-indent: 2em;
			}
			
			#bottom {
				overflow: hidden;
			}
			
			#bottom div {
				width: 100px;
				height: 100px;
				font-size: 80px;
				line-height: 100px;
				text-align: center;
				float: left;
			}
		</style>
		</style>
	</head>

	<body>
		<div id="all">

			<div id="top">
				<div id="time">剩余时间：20</div>
				<div id="score">分数：0</div>
			</div>
			<div id="big_text">黄</div>
			<div id="intro">根据上面的字的颜色从下面选择正确的字，选择正确自动开始</div>

			<div id="bottom">
				<div></div>
				<div></div>
				<div></div>
				<div></div>
				<div></div>
			</div>
		</div>

		<script type="text/javascript">
			var oBigText = document.getElementById("big_text");
			var oScore = document.getElementById("score");
			var oTime = document.getElementById("time");
			var oBtn = document.getElementById("btn");
			var oBottom = document.getElementById("bottom");
			var oBottoms = oBottom.getElementsByTagName("div");
			var colorArr = ["red", "yellow", "blue", "green", "black"];
			var textArr = ["红", "黄", "蓝", "绿", "黑"];
			var bigColor = null;//记录大的div的颜色
			var score = 0;//记录分数
			var timerCount = 20; //倒计时初始值
			var timer = 0;
			
			
			changeColorAndText();
			
			//随机两组0~4 不重复的五个数
			function getRandom(max, min) {
				return Math.floor(Math.random() * (max - min + 1) + min);
			}

			function getRandomArr() {
				var arr = [];

				while(arr.length != 5) {
					var ran = getRandom(4, 0);
					var isRepeat = true;
					for(var i = 0; i < arr.length; i++) {
						if(arr[i] == ran) {
							isRepeat = false;
							break;
						}
					}
					if(isRepeat == true) {
						arr.push(ran);
					}
				}
				return arr;
			}

			function changeColorAndText() {
				//改变小的div字的颜色和字
				var colorIndex = getRandomArr();
				var textIndex = getRandomArr();
				
				//改变大的div字的颜色和字
				
				oBigText.innerHTML = textArr[getRandom(4,0)];
				oBigText.style.color = colorArr[getRandom(4,0)];
				bigColor = colorArr[getRandom(4,0)];
				oBigText.style.color = bigColor;

				for(var i = 0; i < oBottoms.length; i++) {
					oBottoms[i].innerHTML = textArr[textIndex[i]];
					oBottoms[i].style.color = colorArr[colorIndex[i]];
					//自定义属性 colorEn 代表innerHTML 所对应的英文
					//通过colorEn 与全局变量bigColor 判断是否点击正确
					oBottoms[i].colorEn = colorArr[textIndex[i]];
					
					//绑定点击事件
					oBottoms[i].onclick = function (){
						if(bigColor == this.colorEn){
							//等于0 说明是第一次点击正确 此时开启定时器
							if(score == 0){
								starTimer();
							}
							//分数加1 
							score++;
							oScore.innerHTML ="分数:" + score;
							//改变字和颜色
							changeColorAndText();
						}
					}
				}
			}
			
			//开启定时器
			function starTimer(){
				timer = null;
				timer = setInterval(function(){
					if(timerCount == 0){
						
						//停止计数器
						clearInterval(timer);
						alert("游戏结束" + "  " + "完成:" + score);
						location.reload();//刷新网页
					}else{
						oTime.innerHTML = "剩余时间:" + (timerCount--);
					}
				},1000);
			}
			
		</script>
	</body>

</html>