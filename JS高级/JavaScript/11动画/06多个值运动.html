<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="../index.js"></script>
		<style type="text/css">
			#div1{
				width:100px;
				height:100px;
				background-color: red;
			}
		</style>
	</head>
	<body>
		<div id="div1">
			
		</div>
		<script type="text/javascript">
			var oDiv1 = document.getElementById("div1");
			
			oDiv1.onmouseover = function(){
				//Json中包含要改变的属性(attr)和目标值(iTarget)
				var cssJson = {
					width:200,
					height:500,
					opacity:30
				};
				easeMove(this,cssJson,5);
			}
			
			function easeMove(obj,attrJson,speed){
				clearInterval(obj.timer);
				obj.timer = setInterval(function(){
					//定时器每走一次,三个属性值都有变化
					//attr是json中的key key 代表的要变化的属性
					//当三个属性值都不变(到达目标值时)的时候 停止定时器
					var isStop = true; //标记定时器是否可以停止,默认停止
					
					for(var attr in attrJson){
						
						//当前属性的目标值
						var iTarget = attrJson[attr];
						//获取当前属性的样式值
						var attrValue = getStyle(obj,attr);
						attrValue = attr == "opacity" ? attrValue * 100 :parseInt(attrValue);
						
						var speedEnd = (iTarget - attrValue) / speed;
						speedEnd = speedEnd > 0 ? Math.ceil(speedEnd) : Math.floor(speedEnd);
						
						if(iTarget != attrValue){
							//如果每次都没进来此if判断,说明可以停止计时器
							obj.style[attr] = attr == "opacity" ? (attrValue + speedEnd) / 100 : attrValue + speedEnd + "px";
							isStop = false;//没达到目标值.不可以停止定时器
						}
					}
					//判断是否三个都达到目标
					if(isStop){
					clearInterval(obj.timer);
					}
				},30);
			}
			
		</script>
	</body>
</html>
