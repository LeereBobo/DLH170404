<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#wrap {
				width: 700px;
				height: 500px;
				margin: 0 auto;
				border: 10px solid black;
				position: relative;
			}
			
			#div1 {
				width: 50px;
				height: 50px;
				background-color: lightslategray;
				position: absolute;
				left: 50%;
				top: 50%;
				/*margin-top: -25px;
				margin-left:-25px;*/
			}
		</style>
	</head>

	<body>
		<div id="wrap">
			<div id="div1">

			</div>
		</div>

	</body>

	<script type="text/javascript">
		var oWrap = document.getElementById("wrap");
		var oDiv1 = document.getElementById("div1");
		linerMove(oDiv1,"left",-3,0);
		var maxWidth = oWrap.clientWidth - oDiv1.offsetWidth;
		var maxHeight = oWrap.clientHeight - oDiv1.offsetHeight;
		document.onkeydown = function(ev) {
			var ev = ev || window.event;
			switch(ev.keyCode) {
				case 37:
				linerMove(oDiv1,"left",-3,0);
					break;
				case 38:
				linerMove(oDiv1,"top",-3,0);
					break;
				case 39:
				linerMove(oDiv1,"left",3,maxWidth);
					break;
				case 40:
				linerMove(oDiv1,"top",3,maxHeight);
					break;
				default:
					break;
			}
		}

		function linerMove(obj, attr, speed, iTarget) {
			clearInterval(obj.timer);

			obj.timer = setInterval(function() {
				var attrValue = parseInt(getStyle(obj,attr));

				if(Math.abs(iTarget - attrValue) < Math.abs(speed)) {
					obj.style[attr] = iTarget + "px";
					clearInterval(obj.timer);
					setInterval(function(){
						alert("撞墙了");
					},2);
					
				} else {
					obj.style[attr] = attrValue + speed + "px";
				}
			}, 20);
		}

		function getStyle(obj, attr) {
			if(obj.currentStyle) {
				return obj.currentStyle[attr];
			} else {
				return getComputedStyle(obj)[attr];
			}
		}
	</script>

</html>